<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>yamatosdeath OBS Setup</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #0e0e10;
        color: white;
        display: flex;
        justify-content: center;
        padding: 20px;
    }
    .container {
        background: #18181b;
        border-radius: 12px;
        padding: 20px;
        max-width: 500px;
        width: 100%;
        box-shadow: 0 0 20px rgba(0,0,0,0.5);
        text-align: center;
    }
    h1 { font-size: 1.4rem; margin-bottom: 10px; }
    button {
        border: none;
        padding: 12px 20px;
        border-radius: 8px;
        font-size: 16px;
        cursor: pointer;
        background-color: #9147ff;
        color: white;
    }
    button:hover { background-color: #772ce8; }
    #obsLinkBox {
        margin-top: 20px;
        background: black;
        padding: 10px;
        border-radius: 6px;
        font-family: monospace;
        font-size: 13px;
        word-break: break-all;
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: center;
    }
    .copyBtn {
        padding: 6px 12px;
        font-size: 13px;
        background: #9147ff;
        border-radius: 6px;
        cursor: pointer;
        border: none;
        color: white;
    }
    .copyBtn:hover { background: #772ce8; }
</style>
</head>
<body>
<div class="container">
    <h1>yamatosdeath OBS Setup</h1>
    <p>Log in with Twitch to generate your personal OBS link.</p>
    <button id="loginBtn">Login with Twitch</button>
    <div id="obsLinkBox" style="display:none;"></div>
</div>

<script>
const CLIENT_ID = "n62lboxsur7ytj4lowidq6kdf8spuc";
const REDIRECT_URI = "https://www.athernals.com/yamato/";
const SCOPE = "chat:read";

document.getElementById("loginBtn").onclick = () => {
    const url = `https://id.twitch.tv/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=token&scope=${SCOPE}`;
    window.location = url;
};

// Handle OAuth redirect
if (window.location.hash) {
    const hashParams = new URLSearchParams(window.location.hash.substr(1));
    const token = hashParams.get("access_token");
    if (token) {
        const obsUrl = `${window.location.origin}/yamato/obs.html#token=${token}`;
        const box = document.getElementById("obsLinkBox");
        box.style.display = "flex";
        box.innerHTML = `
            <div><strong>Your OBS Link:</strong><br>${obsUrl}</div>
            <button class="copyBtn" onclick="navigator.clipboard.writeText('${obsUrl}').then(()=>alert('Copied to clipboard'));">Copy Link</button>
        `;
    }
}
</script>
</body>
</html>
